import { 
  CustomReport, 
  AnalyticsDashboard, 
  DataVisualization,
  AnalyticsMetric,
  DataExport 
} from '@/types';

// Mock Custom Reports for INES-Ruhengeri
export const mockCustomReports: CustomReport[] = [
  {
    id: 'report-001',
    reportName: 'Student Fee Collection Analysis',
    description: 'Analysis of student fee collection rates by program and semester',
    reportType: 'chart',
    category: 'financial',
    dataSource: 'student_billing',
    query: {
      tables: ['student_billing', 'students', 'academic_programs'],
      fields: [
        { fieldName: 'program_name', alias: 'Program', isVisible: true },
        { fieldName: 'total_fees', alias: 'Total Fees', aggregation: 'sum', isVisible: true },
        { fieldName: 'paid_amount', alias: 'Paid Amount', aggregation: 'sum', isVisible: true },
        { fieldName: 'collection_rate', alias: 'Collection Rate', format: 'percentage', isVisible: true },
      ],
      joins: [
        { table: 'students', type: 'inner', condition: 'student_billing.student_id = students.id' },
        { table: 'academic_programs', type: 'inner', condition: 'students.program_id = academic_programs.id' },
      ],
      conditions: [
        { field: 'billing_date', operator: 'between', value: ['2024-01-01', '2024-12-31'] },
      ],
      groupBy: ['program_name'],
      orderBy: [{ field: 'collection_rate', direction: 'desc' }],
    },
    visualization: {
      type: 'bar_chart',
      title: 'Fee Collection Rate by Program',
      xAxis: 'Program',
      yAxis: 'Collection Rate',
      colorScheme: 'blue',
      showLegend: true,
      showDataLabels: true,
      height: 400,
    },
    filters: [
      {
        id: 'filter-001',
        name: 'Academic Year',
        field: 'academic_year',
        type: 'select',
        defaultValue: '2024',
        options: [
          { label: '2024', value: '2024' },
          { label: '2023', value: '2023' },
          { label: '2022', value: '2022' },
        ],
        isRequired: true,
        isVisible: true,
      },
      {
        id: 'filter-002',
        name: 'Program',
        field: 'program_id',
        type: 'multiselect',
        options: [
          { label: 'Computer Science', value: 'cs' },
          { label: 'Business Administration', value: 'ba' },
          { label: 'Engineering', value: 'eng' },
        ],
        isRequired: false,
        isVisible: true,
      },
    ],
    parameters: [
      {
        id: 'param-001',
        name: 'minimum_collection_rate',
        type: 'number',
        defaultValue: 0,
        description: 'Minimum collection rate to include in analysis',
      },
    ],
    schedule: {
      frequency: 'monthly',
      time: '08:00',
      dayOfMonth: 1,
      isActive: true,
      nextRun: new Date('2024-09-01T08:00:00'),
    },
    recipients: ['bursar@ines.ac.rw', 'rector@ines.ac.rw'],
    isPublic: false,
    tags: ['financial', 'student-fees', 'collection'],
    createdBy: 'Mrs. Marie Claire Uwimana',
    lastRunAt: new Date('2024-08-01T08:00:00'),
    nextRunAt: new Date('2024-09-01T08:00:00'),
    status: 'active',
    createdAt: new Date('2024-07-01'),
    updatedAt: new Date('2024-08-01'),
  },
  {
    id: 'report-002',
    reportName: 'Employee Performance Dashboard',
    description: 'Comprehensive dashboard showing employee performance metrics',
    reportType: 'dashboard',
    category: 'operational',
    dataSource: 'employees',
    query: {
      tables: ['employees', 'departments', 'performance_reviews'],
      fields: [
        { fieldName: 'department_name', alias: 'Department', isVisible: true },
        { fieldName: 'employee_count', alias: 'Employee Count', aggregation: 'count', isVisible: true },
        { fieldName: 'avg_performance_score', alias: 'Avg Performance', aggregation: 'avg', isVisible: true },
        { fieldName: 'satisfaction_score', alias: 'Satisfaction', aggregation: 'avg', isVisible: true },
      ],
      joins: [
        { table: 'departments', type: 'inner', condition: 'employees.department_id = departments.id' },
        { table: 'performance_reviews', type: 'left', condition: 'employees.id = performance_reviews.employee_id' },
      ],
      conditions: [
        { field: 'employees.status', operator: 'equals', value: 'active' },
        { field: 'performance_reviews.review_date', operator: 'greater_than', value: '2024-01-01' },
      ],
      groupBy: ['department_name'],
      orderBy: [{ field: 'avg_performance_score', direction: 'desc' }],
    },
    visualization: {
      type: 'table',
      title: 'Employee Performance by Department',
      showLegend: false,
      showDataLabels: true,
    },
    filters: [
      {
        id: 'filter-003',
        name: 'Department',
        field: 'department_id',
        type: 'select',
        options: [
          { label: 'All Departments', value: 'all' },
          { label: 'Academic Affairs', value: 'academic' },
          { label: 'Administration', value: 'admin' },
          { label: 'Finance', value: 'finance' },
        ],
        isRequired: false,
        isVisible: true,
      },
    ],
    parameters: [],
    recipients: ['hr@ines.ac.rw', 'rector@ines.ac.rw'],
    isPublic: true,
    tags: ['hr', 'performance', 'dashboard'],
    createdBy: 'Dr. Jean Baptiste Nzeyimana',
    lastRunAt: new Date('2024-08-15T09:00:00'),
    status: 'active',
    createdAt: new Date('2024-06-15'),
    updatedAt: new Date('2024-08-15'),
  },
  {
    id: 'report-003',
    reportName: 'Budget vs Actual Variance Report',
    description: 'Detailed analysis of budget variances across all departments',
    reportType: 'tabular',
    category: 'financial',
    dataSource: 'budget_tracking',
    query: {
      tables: ['budget_items', 'actual_expenses', 'departments'],
      fields: [
        { fieldName: 'department_name', alias: 'Department', isVisible: true },
        { fieldName: 'budget_category', alias: 'Category', isVisible: true },
        { fieldName: 'budgeted_amount', alias: 'Budget', aggregation: 'sum', isVisible: true },
        { fieldName: 'actual_amount', alias: 'Actual', aggregation: 'sum', isVisible: true },
        { fieldName: 'variance', alias: 'Variance', isVisible: true },
        { fieldName: 'variance_percentage', alias: 'Variance %', format: 'percentage', isVisible: true },
      ],
      joins: [
        { table: 'actual_expenses', type: 'left', condition: 'budget_items.id = actual_expenses.budget_item_id' },
        { table: 'departments', type: 'inner', condition: 'budget_items.department_id = departments.id' },
      ],
      conditions: [
        { field: 'budget_year', operator: 'equals', value: '2024' },
      ],
      groupBy: ['department_name', 'budget_category'],
      orderBy: [{ field: 'variance_percentage', direction: 'desc' }],
    },
    visualization: {
      type: 'table',
      title: 'Budget Variance Analysis',
      showLegend: false,
      showDataLabels: false,
    },
    filters: [
      {
        id: 'filter-004',
        name: 'Budget Year',
        field: 'budget_year',
        type: 'select',
        defaultValue: '2024',
        options: [
          { label: '2024', value: '2024' },
          { label: '2023', value: '2023' },
        ],
        isRequired: true,
        isVisible: true,
      },
    ],
    parameters: [],
    schedule: {
      frequency: 'monthly',
      time: '07:00',
      dayOfMonth: 5,
      isActive: true,
      nextRun: new Date('2024-09-05T07:00:00'),
    },
    recipients: ['bursar@ines.ac.rw', 'rector@ines.ac.rw'],
    isPublic: false,
    tags: ['budget', 'variance', 'financial'],
    createdBy: 'Mrs. Marie Claire Uwimana',
    lastRunAt: new Date('2024-08-05T07:00:00'),
    nextRunAt: new Date('2024-09-05T07:00:00'),
    status: 'active',
    createdAt: new Date('2024-05-01'),
    updatedAt: new Date('2024-08-05'),
  },
];

// Mock Analytics Dashboards
export const mockAnalyticsDashboards: AnalyticsDashboard[] = [
  {
    id: 'dashboard-001',
    dashboardName: 'Executive Dashboard',
    description: 'High-level KPIs and metrics for executive decision making',
    category: 'executive',
    layout: {
      columns: 12,
      rows: 8,
      gridSize: 20,
    },
    widgets: [
      {
        id: 'widget-001',
        type: 'kpi',
        title: 'Total Revenue',
        position: { x: 0, y: 0 },
        size: { width: 3, height: 2 },
        dataSource: 'financial_summary',
        config: {
          value: 2850000000,
          target: 3000000000,
          unit: 'RWF',
          trend: 'up',
          changePercentage: 12.5,
        },
      },
      {
        id: 'widget-002',
        type: 'chart',
        title: 'Revenue Trend',
        position: { x: 3, y: 0 },
        size: { width: 6, height: 4 },
        dataSource: 'monthly_revenue',
        visualization: {
          type: 'line_chart',
          xAxis: 'month',
          yAxis: 'revenue',
          showLegend: true,
          showDataLabels: false,
        },
      },
    ],
    filters: [
      {
        id: 'dash-filter-001',
        name: 'Date Range',
        type: 'date_range',
        field: 'date',
        defaultValue: { start: '2024-01-01', end: '2024-12-31' },
        affectedWidgets: ['widget-001', 'widget-002'],
      },
    ],
    refreshInterval: 300,
    isPublic: false,
    tags: ['executive', 'kpi', 'overview'],
    createdBy: 'Dr. Jean Baptiste Nzeyimana',
    lastViewedAt: new Date('2024-08-22T10:30:00'),
    viewCount: 245,
    createdAt: new Date('2024-01-15'),
    updatedAt: new Date('2024-08-20'),
  },
];

// Mock Analytics Metrics
export const mockAnalyticsMetrics: AnalyticsMetric[] = [
  {
    id: 'metric-001',
    name: 'Student Enrollment Rate',
    description: 'Percentage of enrolled students vs capacity',
    category: 'academic',
    value: 87.5,
    target: 90.0,
    unit: '%',
    trend: 'up',
    changeValue: 2.3,
    changePercentage: 2.7,
    period: 'Current Semester',
    calculatedAt: new Date('2024-08-22'),
    calculatedBy: 'System Auto-calculation',
  },
  {
    id: 'metric-002',
    name: 'Fee Collection Rate',
    description: 'Percentage of fees collected vs total fees due',
    category: 'financial',
    value: 92.8,
    target: 95.0,
    unit: '%',
    trend: 'up',
    changeValue: 1.5,
    changePercentage: 1.6,
    period: 'Current Academic Year',
    calculatedAt: new Date('2024-08-22'),
    calculatedBy: 'System Auto-calculation',
  },
];

// Mock Dashboard Stats
export const mockAnalyticsDashboardStats = {
  totalReports: 89,
  activeDashboards: 23,
  scheduledReports: 34,
  dataExports: 156,
};
